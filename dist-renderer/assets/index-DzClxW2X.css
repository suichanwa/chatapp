*{margin:0;padding:0;box-sizing:border-box}:root{--bg: #1a1a1a;--bg-2: #2d2d2d;--panel: #252525;--border: #404040;--text: #ffffff;--muted: #888;--accent: #007acc;--accent-2: #005a99;--success: #00ff88;--warn: #ffcc00;--error: #ff4444}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);height:100vh;overflow:hidden}#app{display:flex;flex-direction:column;height:100vh}.app-header{background:var(--bg-2);padding:1rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;position:relative}.app-header h1{font-size:1.2rem;font-weight:600}.app-status-container{position:relative;display:flex;align-items:center}.app-status{font-size:.9rem;font-weight:500;padding:.5rem 1rem;border-radius:20px;border:1px solid transparent;transition:all .3s ease;min-width:140px;text-align:center;cursor:default}.app-status.pending{color:orange;background:#ffa5001a;border-color:#ffa5004d}.app-status.safe{color:var(--success);background:#00ff881a;border-color:#00ff884d;box-shadow:0 0 10px #0f83}.app-status.warning{color:var(--warn);background:#ffcc001a;border-color:#ffcc004d}.app-status.error{color:var(--error);background:#ff44441a;border-color:#ff44444d;animation:pulse-error 2s infinite}@keyframes pulse-error{0%,to{box-shadow:0 0 5px #ff44444d}50%{box-shadow:0 0 15px #f449}}.app-main{display:flex;flex:1;overflow:hidden}.chat-list{width:300px;background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column}.chat-list-header{padding:1rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.chat-list-header h2{font-size:1rem;font-weight:600}#new-chat-btn{background:var(--accent);color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:.8rem}#new-chat-btn:hover{background:var(--accent-2)}#chat-list{flex:1;list-style:none;overflow-y:auto;padding:.5rem}.chat-item{display:flex;align-items:center;gap:.75rem;padding:.75rem;cursor:pointer;border-radius:8px;margin:.25rem 0;transition:all .2s}.chat-item:hover{background:#ffffff0d}.chat-item.active{background:#007acc2e;outline:1px solid rgba(0,122,204,.35)}.chat-avatar{font-size:1.1rem}.chat-info{flex:1;min-width:0}.chat-name{font-weight:600;color:#fff;margin-bottom:.15rem}.chat-preview{font-size:.8rem;color:var(--muted);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-meta{display:flex;flex-direction:column;align-items:flex-end}.chat-time{font-size:.7rem;color:#666}.no-chats{padding:2rem 1rem;text-align:center;color:var(--muted);font-style:italic}.connection-info{padding:1rem;border-top:1px solid var(--border);background:var(--bg);font-size:.8rem;color:var(--muted)}.connection-info div{margin-bottom:.25rem}.chat-view{flex:1;display:flex;flex-direction:column;min-width:0}.chat-header{padding:1rem;border-bottom:1px solid var(--border);background:var(--bg-2);display:flex;justify-content:space-between;align-items:center}.chat-header h3{font-size:1rem;font-weight:600}#chat-status{font-size:.8rem;color:var(--muted)}.messages{flex:1;padding:1rem;overflow-y:auto;background:var(--bg);overscroll-behavior-y:contain;display:flex;flex-direction:column}.message{margin:.35rem 0;width:fit-content;max-width:min(65ch,80%);word-break:break-word}.message.sent{margin-left:auto}.message.received{margin-right:auto}.message-content{display:inline-block;padding:.75rem 1rem;border-radius:12px;color:#fff;line-height:1.4;background:#333;max-width:100%}.message.sent .message-content{background:linear-gradient(135deg,#007acc,#06a)}.image-message{position:relative;width:100%;max-width:min(65ch,80%);background:#121212;border:1px solid #2a2a2a;border-radius:10px;overflow:hidden;box-shadow:0 4px 14px #0006,inset 0 0 0 1px #ffffff08}.message-image{display:block;width:100%;height:auto;max-height:280px;object-fit:cover;border-radius:10px 10px 0 0}.message-footer{display:flex;align-items:flex-end;justify-content:space-between;gap:.5rem;margin-top:.25rem}.message-time{display:flex;flex-direction:column;align-items:flex-end;line-height:1.1;font-size:.75rem;color:var(--muted)}.message-time .time{font-variant-numeric:tabular-nums}.message-time .date{margin-top:2px;font-size:.7rem;color:#9aa0a6}.message.sensitive:not(.revealed) .message-content,.message.sensitive:not(.revealed) .image-message,.message.sensitive:not(.revealed) .image-caption,.message.sensitive:not(.revealed) .message-image{filter:none}.message.sensitive .privacy-veil{display:none!important}.message.sensitive:not(.revealed) .message-time{opacity:0;visibility:hidden;pointer-events:none;transition:opacity .12s ease}.message.sensitive.revealed .message-time{opacity:1;visibility:visible}.message.sensitive .message-content,.message.sensitive .image-caption{-webkit-user-select:none;user-select:none}.message-footer{display:flex;justify-content:space-between;align-items:center;gap:.5rem;margin-top:.25rem;padding:0 .25rem;width:100%}.message-time-wrapper{position:relative;min-height:1.6em}.timestamp-hint{position:absolute;right:0;bottom:0;font-size:.7rem;color:var(--muted);opacity:0;letter-spacing:.02em;text-transform:uppercase;pointer-events:none;transition:opacity .12s ease}.message:not(.sensitive) .timestamp-hint{display:none}.message.sensitive:not(.revealed) .timestamp-hint{opacity:.18}.message.sensitive:not(.revealed):hover .timestamp-hint{opacity:.3}.message.sensitive.revealed .timestamp-hint{opacity:0}@media (max-width: 768px){.message,.image-message{max-width:85%}.message-image.expanded{max-width:95vw;max-height:95vh}}body.lightbox-open{overflow:hidden}body.lightbox-open:after{content:"";position:fixed;top:0;right:0;bottom:0;left:0;background:#000000d9;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:10000}.message-image.expanded{position:fixed;top:50%;left:50%;max-width:90vw;max-height:90vh;width:auto;height:auto;object-fit:contain;transform:translate(-50%,-50%);border-radius:8px;cursor:zoom-out;z-index:10001;box-shadow:0 12px 40px #0009}.message-image.loading{background:linear-gradient(90deg,#1a1a1a,#222,#1a1a1a);background-size:200% 100%;animation:shimmer 1.2s infinite}@keyframes shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}.message-composer{padding:.75rem 1rem;border-top:1px solid var(--border);background:var(--bg-2);display:grid;grid-template-columns:auto 1fr auto;gap:.5rem;align-items:center}#image-input{display:none}.image-btn{background:#3a3a3a;color:#fff;border:1px solid #4a4a4a;border-radius:8px;padding:.5rem .65rem;cursor:pointer;transition:all .2s ease}.image-btn:hover{background:#474747}.image-btn:disabled{opacity:.5;cursor:not-allowed}#message-input{width:100%;padding:.65rem .75rem;border:1px solid var(--border);border-radius:8px;background:#1a1a1a;color:#fff;outline:none}#message-input:focus{border-color:var(--accent)}#send-btn{background:var(--accent);color:#fff;border:none;padding:.55rem 1rem;border-radius:8px;cursor:pointer;font-size:.9rem;transition:background .2s ease}#send-btn:hover{background:var(--accent-2)}#send-btn:disabled,#message-input:disabled{opacity:.6;cursor:not-allowed}.modal{display:none;position:fixed;top:0;right:0;bottom:0;left:0;background:#000000b3;z-index:1000;justify-content:center;align-items:center}.modal.show{display:flex}.modal-content{background:var(--bg-2);border-radius:8px;width:90%;max-width:500px;max-height:80vh;overflow-y:auto}.modal-header{padding:1rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}.modal-header h3{font-size:1.1rem}.modal-close{background:none;border:none;color:var(--muted);font-size:1.5rem;cursor:pointer;width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:50%}.modal-body{padding:1rem}.connection-tabs{display:flex;margin-bottom:1rem;border-bottom:1px solid var(--border)}.tab-btn{flex:1;padding:.75rem;background:none;border:none;color:var(--muted);cursor:pointer;border-bottom:2px solid transparent;transition:all .2s}.tab-btn.active{color:#fff;border-bottom-color:var(--accent)}.tab-btn:hover:not(.active){color:#ccc}.form-group{margin-bottom:1rem}.form-group label{display:block;margin-bottom:.5rem;font-weight:500;color:#ccc}.form-group input{width:100%;padding:.75rem;border:1px solid var(--border);border-radius:4px;background:#1a1a1a;color:#fff}.form-group input:focus{outline:none;border-color:var(--accent)}.primary-btn{background:var(--accent);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:4px;cursor:pointer;font-size:.9rem;width:100%}.primary-btn:hover{background:var(--accent-2)}.info-section{margin-bottom:1rem}.info-section h4{margin-bottom:1rem;color:#fff}.info-item{display:flex;align-items:center;margin-bottom:.75rem;gap:.5rem}.info-item label{min-width:100px;font-weight:500;color:#ccc}.info-item span{flex:1;color:#fff;font-family:monospace}.info-item textarea{flex:1;height:80px;padding:.5rem;border:1px solid var(--border);border-radius:4px;background:#1a1a1a;color:#fff;font-family:monospace;font-size:.8rem;resize:vertical}.copy-btn{display:inline-flex;align-items:center;justify-content:center;gap:.25rem;height:32px;min-width:32px;padding:0 .5rem;border-radius:8px;background:transparent;color:#ccc;border:1px solid var(--border);cursor:pointer;transition:background .15s ease,border-color .15s ease,color .15s ease}.copy-btn:hover{background:#2a2a2a;border-color:var(--accent);color:#fff}.copy-btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.copy-btn:disabled{opacity:.6;cursor:not-allowed}.copy-btn.success{background:#28a745;border-color:#28a745;color:#fff}.copy-btn.error{background:#dc3545;border-color:#dc3545;color:#fff}.blurred{filter:blur(8px) brightness(.8);transition:filter .4s cubic-bezier(.4,0,.2,1)}.modal-animate-in{animation:modalIn .4s cubic-bezier(.4,0,.2,1)}.modal-animate-out{animation:modalOut .4s cubic-bezier(.4,0,.2,1)}@keyframes modalIn{0%{filter:blur(0px) brightness(1)}to{filter:blur(8px) brightness(.8)}}@keyframes modalOut{0%{filter:blur(8px) brightness(.8)}to{filter:blur(0px) brightness(1)}}@media (max-width: 900px){.chat-list{width:260px}}@media (max-width: 768px){.chat-list{display:none}.message{max-width:85%}.message-image.expanded{max-width:95vw;max-height:95vh}.message-composer{padding:.75rem}}@media (prefers-color-scheme: dark){.image-message{border:1px solid #444}}.modal{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10000;display:none;opacity:0;transition:opacity .3s ease;background:#000c}.modal.show{display:flex!important;opacity:1!important;align-items:center;justify-content:center}.modal-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:#000c;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:10000}.modal-container{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%;padding:2rem;z-index:10001}.modal-content{background:#2d2d2d;border-radius:12px;box-shadow:0 20px 60px #00000080;width:100%;max-width:600px;max-height:90vh;overflow:hidden;transform:scale(.9);transition:transform .3s ease;z-index:10002}.modal.show .modal-content{transform:scale(1)}.modal-header{display:flex;align-items:center;justify-content:space-between;padding:1.5rem;border-bottom:1px solid #404040;background:#353535}.modal-title{font-size:1.25rem;font-weight:600;color:#fff;margin:0}.modal-close{background:none;border:none;color:#888;cursor:pointer;padding:.5rem;border-radius:6px;transition:all .2s;display:flex;align-items:center;justify-content:center}.modal-close:hover{background:#404040;color:#fff}.modal-body{padding:0;overflow-y:auto;max-height:calc(90vh - 80px);pointer-events:auto}.tab-system{display:flex;flex-direction:column;height:100%}.tab-nav{display:flex;background:#1a1a1a;border-bottom:1px solid #404040}.tab-button{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:none;border:none;color:#888;cursor:pointer;transition:all .2s;border-bottom:3px solid transparent;font-size:.9rem;font-weight:500}.tab-button:hover:not(.active){background:#2a2a2a;color:#ccc}.tab-button.active{color:#fff;background:#2d2d2d;border-bottom-color:#007acc}.tab-icon{font-size:1.1rem}.tab-content{flex:1;position:relative;display:none}.tab-panel{display:none;height:100%;padding:2rem}.tab-panel.active{display:block}.connection-form{max-width:500px;margin:0 auto}.form-header{text-align:center;margin-bottom:2rem}.form-icon{font-size:3rem;margin-bottom:1rem}.form-header h4{font-size:1.5rem;font-weight:600;color:#fff;margin:0 0 .5rem}.form-description{color:#888;font-size:.9rem;margin:0}.form-content{margin-bottom:2rem}.form-group{margin-bottom:1.5rem}.form-label{display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem;font-weight:500;color:#ccc;font-size:.9rem}.label-icon{font-size:1rem}.input-group{position:relative}.form-input{width:100%;padding:.875rem 1rem;border:2px solid #404040;border-radius:8px;background:#1a1a1a;color:#fff;font-size:.9rem;transition:all .2s;outline:none}.form-input:focus{border-color:#007acc;box-shadow:0 0 0 3px #007acc1a}.form-input::placeholder{color:#666}.form-input.error{border-color:#f44;box-shadow:0 0 0 3px #ff44441a}.input-hint{margin-top:.5rem;font-size:.8rem;color:#666}.connection-status{padding:1rem;background:#1a1a1a;border-radius:8px;border:1px solid #333}.status-indicator{display:flex;align-items:center;gap:.75rem}.status-dot{width:12px;height:12px;border-radius:50%;position:relative}.status-dot.offline{background:#666}.status-dot.connecting{background:#fc0;animation:pulse 1.5s infinite}.status-dot.connected,.status-dot.online{background:#28a745}.status-dot.error{background:#f44}.status-text{font-size:.9rem;color:#ccc;font-weight:500}.form-actions{text-align:center}.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1.5rem;border:none;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s;text-decoration:none;position:relative;overflow:hidden;outline:none}.btn:disabled{cursor:not-allowed;opacity:.6}.btn-primary{background:linear-gradient(135deg,#007acc,#06a);color:#fff;box-shadow:0 4px 12px #007acc4d}.btn-primary:hover:not(:disabled){background:linear-gradient(135deg,#06a,#058);box-shadow:0 6px 16px #007acc66;transform:translateY(-1px)}.btn-primary:active{transform:translateY(0);box-shadow:0 2px 8px #007acc4d}.btn-secondary{background:#666;color:#fff;border:1px solid #777}.btn-secondary:hover:not(:disabled){background:#777;border-color:#888}.btn-success{background:linear-gradient(135deg,#28a745,#218838);color:#fff;box-shadow:0 4px 12px #28a7454d}.btn-success:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1e7e34);box-shadow:0 6px 16px #28a74566;transform:translateY(-1px)}.btn-small{padding:.5rem .875rem;font-size:.8rem;min-width:44px;min-height:44px}.btn-icon{font-size:1rem;flex-shrink:0}.btn-text{flex-shrink:0}.btn.loading{pointer-events:none;opacity:.8}.btn.loading .btn-icon{animation:spin 1s linear infinite}.btn-secondary.success{background:#28a745!important;border-color:#28a745!important;color:#fff!important}.btn-secondary.error{background:#dc3545!important;border-color:#dc3545!important;color:#fff!important}.error-message{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;padding:.875rem 1rem;border-radius:8px;margin:0 0 1rem;font-size:.9rem;border:1px solid rgba(220,53,69,.3);box-shadow:0 4px 12px #dc354533;animation:slideIn .3s ease;display:flex;align-items:center;gap:.5rem}.error-message:before{content:"⚠️";font-size:1rem;flex-shrink:0}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 640px){.tab-section{padding:1.5rem}.modal-tabs{border-radius:0}.modal-tab{padding:.875rem 1rem;font-size:.8rem}.tab-label{display:none}.info-value{flex-direction:column;align-items:flex-start;gap:.5rem}.key-container{flex-direction:column}.address-display{font-size:.8rem}.btn{width:100%;justify-content:center}.btn-small{width:auto;min-width:44px}}@media (max-width: 480px){.section-title{font-size:1.1rem}.form-input{padding:.75rem}.key-display{min-height:100px;font-size:.7rem}}.messages,#chat-list,.modal-body,.tab-content,.tab-panel,.debug-logs,.key-display,.address-display,.key-textarea,textarea{scrollbar-gutter:stable both-edges;scrollbar-width:thin;scrollbar-color:transparent transparent}.messages:hover,#chat-list:hover,.modal-body:hover,.tab-content:hover,.tab-panel:hover,.debug-logs:hover,.key-display:hover,.address-display:hover,key-textarea:hover,textarea:hover{scrollbar-color:rgba(255,255,255,.3) transparent}.messages::-webkit-scrollbar,#chat-list::-webkit-scrollbar,.modal-body::-webkit-scrollbar,.tab-content::-webkit-scrollbar,.tab-panel::-webkit-scrollbar,.debug-logs::-webkit-scrollbar,.key-display::-webkit-scrollbar,.address-display::-webkit-scrollbar,key-textarea::-webkit-scrollbar,textarea::-webkit-scrollbar{width:8px;height:8px}.messages::-webkit-scrollbar-track,#chat-list::-webkit-scrollbar-track,.modal-body::-webkit-scrollbar-track,.tab-content::-webkit-scrollbar-track,.tab-panel::-webkit-scrollbar-track,.debug-logs::-webkit-scrollbar-track,.key-display::-webkit-scrollbar-track,.address-display::-webkit-scrollbar-track,key-textarea::-webkit-scrollbar-track,textarea::-webkit-scrollbar-track{background:transparent}.messages::-webkit-scrollbar-thumb,#chat-list::-webkit-scrollbar-thumb,.modal-body::-webkit-scrollbar-thumb,.tab-content::-webkit-scrollbar-thumb,.tab-panel::-webkit-scrollbar-thumb,.debug-logs::-webkit-scrollbar-thumb,.key-display::-webkit-scrollbar-thumb,.address-display::-webkit-scrollbar-thumb,key-textarea::-webkit-scrollbar-thumb,textarea::-webkit-scrollbar-thumb{background:transparent;border-radius:8px}.messages:hover::-webkit-scrollbar-thumb,#chat-list:hover::-webkit-scrollbar-thumb,.modal-body:hover::-webkit-scrollbar-thumb,.tab-content:hover::-webkit-scrollbar-thumb,.tab-panel:hover::-webkit-scrollbar-thumb,.debug-logs:hover::-webkit-scrollbar-thumb,.key-display:hover::-webkit-scrollbar-thumb,.address-display:hover::-webkit-scrollbar-thumb,key-textarea:hover::-webkit-scrollbar-thumb,textarea:hover::-webkit-scrollbar-thumb{background:#ffffff40}.modal-overlay{z-index:10000}.modal-content,.modal-header,.modal-body,.modal-tabs,.connection-tabs,.tab-button,.modal-tab,.tab-btn{position:relative;z-index:10003;pointer-events:auto}.connection-tabs{display:flex;background:#1a1a1a;border-bottom:1px solid #404040}.connection-tabs .tab-btn{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem 1.5rem;background:none;border:none;color:#888;cursor:pointer;transition:all .2s ease;font-size:.9rem;font-weight:500}.connection-tabs .tab-btn:hover:not(.active){background:#2a2a2a;color:#ccc}.connection-tabs .tab-btn.active{color:#fff;background:#2d2d2d;border-bottom:3px solid #007acc}.tab-content{display:none}.tab-content.active{display:block}.modal-body{pointer-events:auto}
