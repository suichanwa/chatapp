var p=Object.getPrototypeOf;var m=Reflect.get;var d=(c,e,o)=>m(p(c),o,e);var s=(c,e,o)=>new Promise((i,t)=>{var l=n=>{try{r(o.next(n))}catch(u){t(u)}},a=n=>{try{r(o.throw(n))}catch(u){t(u)}},r=n=>n.done?i(n.value):Promise.resolve(n.value).then(l,a);r((o=o.apply(c,e)).next())});import{ChatApp as g}from"./ChatApp-C2noyYX3.js";class h extends g{constructor(){super(),console.log("ðŸ“± MobileChatApp initialized")}initialize(){return s(this,null,function*(){console.log("ðŸ“± MobileChatApp: Starting mobile initialization..."),this.setupMobileEnvironment(),yield d(h.prototype,this,"initialize").call(this),yield this.setupMobileFeatures()})}setupMobileEnvironment(){document.body.classList.add("mobile-app");const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",document.head.appendChild(e),this.hasNotch()&&document.body.classList.add("has-notch")}setupMobileFeatures(){return s(this,null,function*(){yield this.requestMobilePermissions(),yield this.setupMobileNetworking(),this.setupTouchHandlers(),this.setupMobileLifecycle()})}requestMobilePermissions(){return s(this,null,function*(){try{if("Notification"in window&&(yield Notification.requestPermission()),"wakeLock"in navigator)try{yield navigator.wakeLock.request("screen")}catch(e){console.log("Wake lock request failed:",e)}}catch(e){console.log("Mobile permissions setup failed:",e)}})}setupMobileNetworking(){return s(this,null,function*(){console.log("ðŸ“± Setting up mobile networking (WebRTC mode)")})}setupTouchHandlers(){let e=0;document.addEventListener("touchstart",i=>{e=i.touches[0].clientY},{passive:!0}),document.addEventListener("touchmove",i=>{const t=i.touches[0].clientY,l=e-t,a=document.querySelector(".messages");a&&l<0&&a.scrollTop===0&&i.preventDefault()},{passive:!1});let o=0;document.addEventListener("touchend",i=>{const t=Date.now();t-o<=300&&i.preventDefault(),o=t},!1)}setupMobileLifecycle(){document.addEventListener("visibilitychange",()=>{document.hidden?console.log("ðŸ“± App went to background"):console.log("ðŸ“± App came to foreground")}),window.addEventListener("orientationchange",()=>{setTimeout(()=>{this.handleOrientationChange()},100)})}handleOrientationChange(){console.log("ðŸ“± Orientation changed"),this.renderChatList(),this.currentChatId&&this.renderMessages()}hasNotch(){return/iPhone/.test(navigator.userAgent)&&window.screen.height>=812&&window.devicePixelRatio>=2}setupUI(){return s(this,null,function*(){yield d(h.prototype,this,"setupUI").call(this),this.adaptUIForMobile()})}adaptUIForMobile(){document.querySelectorAll("button").forEach(t=>{t.style.minHeight="44px",t.style.minWidth="44px"}),document.querySelectorAll("input").forEach(t=>{t.style.fontSize="16px"});const i=document.getElementById("app");i&&i.classList.add("mobile-layout")}}export{h as MobileChatApp};
